# Nom du fichier Makefile : Makefile2
# Nom de l'exécutable pour la Version 2
EXEC_V2 = gerer_sf_v2

# Compilateur
CC = gcc

# Options de compilation (standard C11, warnings stricts, débug)
CFLAGS = -std=c11 -Wall -Wextra -g

# Fichiers sources et objets
# Le fichier principal est le programme de test
SRC_MAIN = $(EXEC_V2).c
# Les modules sont bloc, inode, et sf
SRC_MODS = bloc.c inode.c sf.c
OBJ_MODS = $(SRC_MODS:.c=.o)
OBJS = $(SRC_MAIN:.c=.o) $(OBJ_MODS)

# Cible principale : construit l'exécutable
all: $(EXEC_V2)

$(EXEC_V2): $(OBJS)
	$(CC) $(CFLAGS) -o $@ $^
	@echo "Compilation de $(EXEC_V2) terminée."

# Règle de compilation des modules (.o)
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

# Règle pour nettoyer les fichiers générés
clean:
	rm -f $(OBJS) $(EXEC_V2) *.o
	@echo "Nettoyage des fichiers objets et de l'exécutable V2 effectué."

# Règle pour exécuter le test (optionnel)
run: $(EXEC_V2)
	./$(EXEC_V2)
